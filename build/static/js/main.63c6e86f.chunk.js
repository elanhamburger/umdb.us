(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,function(e,t,n){e.exports=n.p+"static/media/bus.45d60d07.svg"},,,,function(e,t,n){e.exports=n.p+"static/media/my_location.aa7f53c0.svg"},function(e,t,n){e.exports=n.p+"static/media/walk.ab411e5e.svg"},function(e,t,n){e.exports=n.p+"static/media/close.db23af8c.svg"},,function(e,t,n){e.exports=n(41)},,,,,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(10),s=n.n(o),r=(n(21),n(2)),c=n(3),l=n(6),u=n(4),d=n(5),m=n(1),p=n(7),h=n.n(p),v=n(11),f=n.n(v),g=(n(23),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).initMap=n.initMap.bind(Object(m.a)(Object(m.a)(n))),n.panTo=n.panTo.bind(Object(m.a)(Object(m.a)(n))),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{id:"Map"},i.a.createElement("div",{className:"Map-Loader"},i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null)))}},{key:"componentDidMount",value:function(){var e=this;if(window.google&&window.google.maps)this.initMap();else{var t=document.createElement("script");t.type="text/javascript",t.src="https://maps.google.com/maps/api/js?key=AIzaSyDJpOnkWxiMjRMY_CJOLQRAswjTHKnI3R0",t.addEventListener("load",function(t){return e.initMap()});var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}}},{key:"componentDidUpdate",value:function(e){this.props.selection!==e.selection&&(e.selection&&this.markers[e.selection.id].setIcon(h.a),this.props.selection&&this.markers[this.props.selection.id].setIcon())}},{key:"initMap",value:function(){var e=this,t={lat:38.98754114838913,lng:-76.9440220668912},n=new window.google.maps.LatLngBounds({lat:38.961104,lng:-77.314249},{lat:39.202175,lng:-76.779144}),a={center:t,zoom:16,mapTypeControl:!1,fullscreenControl:!1,streetViewControl:!1,restriction:{latLngBounds:n}};this.map=new window.google.maps.Map(document.getElementById("Map"),a),this.markers={},fetch("https://api.momentumbus.com/stops.json").then(function(e){return e.json()}).then(function(t){for(var n=function(n){var a=new window.google.maps.Marker({map:e.map,position:{lat:t[n].lat,lng:t[n].lng},title:t[n].name,icon:h.a});e.markers[t[n].id]=a,a.addListener("click",function(){e.props.onStopSelected({id:t[n].id,name:t[n].name,lat:t[n].lat,lng:t[n].lng,type:"stop"})})},a=0;a<t.length;a++)n(a)}),this.myLocationMarker=new window.google.maps.Marker({map:null,position:t,title:"My Location",icon:{url:f.a,anchor:new window.google.maps.Point(12,12)},size:new window.google.maps.Size(24,24),zIndex:999}),this.myLocationRadius=new window.google.maps.Circle({map:null,strokeWeight:0,fillColor:"#CCDAF0",fillOpacity:.35,center:t,radius:1}),navigator.geolocation&&navigator.geolocation.watchPosition(function(t){var a={lat:t.coords.latitude,lng:t.coords.longitude};n.contains(a)?(e.myLocationMarker.setMap(e.map),e.myLocationMarker.setPosition(a),e.myLocationRadius.setMap(e.map),e.myLocationRadius.setCenter(a),e.myLocationRadius.setRadius(t.coords.accuracy)):(e.myLocationMarker.setMap(null),e.myLocationRadius.setMap(null))})}},{key:"panTo",value:function(e){this.map.panTo(e)}}]),t}(i.a.Component)),b=n(14);function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var y=i.a.createElement("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"}),j=i.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),O=function(e){return i.a.createElement("svg",E({width:24,height:24,viewBox:"0 0 24 24"},e),y,j)},k=(n.p,n(25),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).onClick=n.onClick.bind(Object(m.a)(Object(m.a)(n))),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"SearchResult",onClick:this.onClick},i.a.createElement(O,{className:"SearchResult-Image",alt:"Bus Stop"}),i.a.createElement("span",{className:"SearchResult-Name"},this.props.result.name),i.a.createElement("span",{className:"SearchResult-Id"},"Stop #",this.props.result.id))}},{key:"onClick",value:function(){this.props.onResultClicked(this.props.result)}}]),t}(i.a.Component)),C=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return this.state.results?i.a.createElement("div",{className:"SearchResults"},this.state.results.map(function(t){return i.a.createElement(k,{key:t.id,result:t,onResultClicked:e.props.onResultClicked})})):null}},{key:"componentDidUpdate",value:function(e){var t=this;this.props!==e&&(this.props.query?fetch("https://api.momentumbus.com/search?q="+this.props.query).then(function(e){return e.json()}).then(function(e){return t.setState({results:e})}):this.setState({results:void 0}))}}]),t}(i.a.Component);function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var w=i.a.createElement("path",{d:"M21.71 11.29l-9-9c-.39-.39-1.02-.39-1.41 0l-9 9c-.39.39-.39 1.02 0 1.41l9 9c.39.39 1.02.39 1.41 0l9-9c.39-.38.39-1.01 0-1.41zM14 14.5V12h-4v3H8v-4c0-.55.45-1 1-1h5V7.5l3.5 3.5-3.5 3.5z",fill:"#00194B"}),N=i.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),R=function(e){return i.a.createElement("svg",S({width:24,height:24,viewBox:"0 0 24 24"},e),w,N)},M=(n.p,n(27),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},n.onInputChanged=n.onInputChanged.bind(Object(m.a)(Object(m.a)(n))),n.onResultClicked=n.onResultClicked.bind(Object(m.a)(Object(m.a)(n))),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"SearchBar"},i.a.createElement("div",{className:"SearchBar-Inputs"},i.a.createElement("input",{className:"SearchBar-Input",type:"text",placeholder:"Search UMD...",onChange:this.onInputChanged,autoComplete:"off"}),i.a.createElement("div",{className:"SearchBar-ModeButton"},i.a.createElement(R,{className:"SearchBar-ModeButton-Icon",onClick:this.props.onSwitchMode}))),i.a.createElement(C,{onResultClicked:this.onResultClicked,query:this.state.query}))}},{key:"onInputChanged",value:function(e){this.setState({query:e.target.value})}},{key:"onResultClicked",value:function(e){this.setState({query:null}),this.props.onStopSelected(e)}}]),t}(i.a.Component)),D=n(8),B=function(e){return{115:"#EC6E2E",116:"#782B90",117:"#1C99D5",118:"#FEC92D",122:"#00AA4D",125:"#126352",136:"#B4B5B4"}[e]||"#A8A9AD"},I=n(12),P=n.n(I),L=(n(29),n(31),function(e){return i.a.createElement("div",{className:"DirectionsResult"},!e.first&&i.a.createElement("div",{className:"DirectionsResult-Line-Top"}),i.a.createElement("div",{className:"DirectionsResult-Symbol"}),!e.last&&i.a.createElement("div",{className:"DirectionsResult-Line-Bottom"}),i.a.createElement("div",{className:"DirectionsResult-Title"},e.stop.name),i.a.createElement("div",{className:"DirectionsResult-Info"},"Stop #",e.stop.id))}),T=function(e){return i.a.createElement("div",{className:"DirectionsResult"},i.a.createElement("div",{className:"DirectionsResult-Line-Full"}),i.a.createElement("div",{className:"DirectionsResult-Title"},i.a.createElement("span",{className:"DirectionsResult-Route",style:{backgroundColor:B(e.route.id)}},e.route.id),e.route.name),i.a.createElement("div",{className:"DirectionsResult-Info"},e.route.count," stops"))},H=function(e){return i.a.createElement("div",{className:"DirectionsResult"},i.a.createElement("div",{className:"DirectionsResult-Line-Full"}),i.a.createElement("div",{className:"DirectionsResult-Title"},i.a.createElement("img",{className:"DirectionsResult-Walk",src:P.a,alt:"Walk"})," Walk"),i.a.createElement("div",{className:"DirectionsResult-Info"},"Cross the street"))},x=function(e){return"stop"===e.result.type?i.a.createElement(L,Object.assign({stop:e.result},e)):"route"===e.result.type?i.a.createElement(T,{route:e.result}):"walk"===e.result.type?i.a.createElement(H,null):void 0},z=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return this.state.data?i.a.createElement("div",{className:"DirectionsResults"},this.state.data.length>0?this.state.data.map(function(t,n){return i.a.createElement(x,{key:n,result:t,first:0===n,last:n===e.state.data.length-1})}):i.a.createElement("div",{className:"DirectionsResults-None"},"There are no routes that run between these two stops")):null}},{key:"componentDidUpdate",value:function(e){var t=this;this.props!==e&&(this.props.from&&this.props.to&&void 0!==this.props.daytime?fetch("https://api.momentumbus.com/directions?from="+this.props.from+"&to="+this.props.to+"&daytime="+this.props.daytime).then(function(e){return e.json()}).then(function(e){return t.setState({data:e})}):this.setState({data:null}))}}]),t}(i.a.Component);function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var A=i.a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z",fill:"rgba(255, 255, 255, 0.8)"}),W=i.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),F=function(e){return i.a.createElement("svg",q({width:24,height:24,viewBox:"0 0 24 24"},e),A,W)};n.p;function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var U=i.a.createElement("path",{d:"M6.99 11L3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z",fill:"white"}),V=i.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),_=function(e){return i.a.createElement("svg",J({width:24,height:24,viewBox:"0 0 24 24"},e),U,V)},K=(n.p,n(33),function(){var e=new Date;return e.getDay()%6!==0&&e.getHours()>3&&e.getHours()<=17}),Q=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={daytime:K()},n.onInputChanged=n.onInputChanged.bind(Object(m.a)(Object(m.a)(n))),n.onRouteSetChanged=n.onRouteSetChanged.bind(Object(m.a)(Object(m.a)(n))),n.onResultClicked=n.onResultClicked.bind(Object(m.a)(Object(m.a)(n))),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"DirectionsBar"},i.a.createElement("div",{className:"DirectionsBar-Header"},i.a.createElement("div",null,i.a.createElement("input",{className:"DirectionsBar-Header-Input",name:"from",type:"text",placeholder:"From",onChange:this.onInputChanged,autoComplete:"off"}),i.a.createElement("input",{className:"DirectionsBar-Header-Input",name:"to",type:"text",placeholder:"To",onChange:this.onInputChanged,autoComplete:"off"})),i.a.createElement("div",{className:"DirectionsBar-Header-Close"},i.a.createElement(F,{className:"DirectionsBar-Header-Close-Button",onClick:this.props.onSwitchMode}))),i.a.createElement("div",{className:"DirectionsBar-RouteSet",onClick:this.onRouteSetChanged},this.state.daytime?"Daytime Routes":"Weekend/Evening Routes",i.a.createElement(_,null)),i.a.createElement(C,{onResultClicked:this.onResultClicked,query:this.state.query}),i.a.createElement(z,{from:this.state.from,to:this.state.to,daytime:this.state.daytime}))}},{key:"onInputChanged",value:function(e){this.setState(Object(D.a)({query:e.target.value,active:e.target},e.target.name,null))}},{key:"onRouteSetChanged",value:function(e){this.setState(function(e,t){return{daytime:!e.daytime}})}},{key:"onResultClicked",value:function(e){var t=this.state.active;t.value=e.name,this.setState(Object(D.a)({query:null,active:null},t.name,e.id))}}]),t}(i.a.Component),Y=(n(35),function(e){var t=Object(a.useState)(!1),n=Object(b.a)(t,2),o=n[0],s=n[1];return i.a.createElement("div",{className:"SideBar"},o?i.a.createElement(Q,{onSwitchMode:function(){return s(!1)}}):i.a.createElement(M,{onStopSelected:e.onStopSelected,onSwitchMode:function(){return s(!0)}}))}),$=(n(37),function(e){return i.a.createElement("div",{className:"Prediction"},i.a.createElement("div",{className:"Prediction-RouteId",style:{backgroundColor:B(e.id)}},e.id),i.a.createElement("div",{className:"Prediction-RouteName"},e.name),i.a.createElement("div",{className:"Prediction-Time"},e.min," min"))}),G=n(13),X=n.n(G),Z=(n(39),function(e){return e[0]||e}),ee=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={loading:!1,data:[]},n.updatePredictions=n.updatePredictions.bind(Object(m.a)(Object(m.a)(n))),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.stop?i.a.createElement("div",{className:"Predictions-Wrapper"},i.a.createElement("div",{className:"Predictions"},i.a.createElement("div",{className:"Predictions-Header"},i.a.createElement("div",{className:"Predictions-Stop"},i.a.createElement("h2",{className:"Predictions-StopName"},this.props.stop.name),i.a.createElement("p",{className:"Predictions-StopId"},"Stop #",this.props.stop.id)),i.a.createElement("div",{className:"Predictions-Close",onClick:this.props.onCloseClicked},i.a.createElement("img",{src:X.a,alt:"Close"}))),i.a.createElement("div",{className:"Predictions-List"},this.state.data.length>0?[i.a.createElement("div",null,this.state.data.slice(0,Math.ceil(this.state.data.length/2)).map(function(e){return i.a.createElement($,{key:e.id,id:e.id,name:e.title,min:e.pred})})),i.a.createElement("div",null,this.state.data.slice(Math.ceil(this.state.data.length/2)).map(function(e){return i.a.createElement($,{key:e.id,id:e.id,name:e.title,min:e.pred})}))]:i.a.createElement("p",{className:"Predictions-Note"},this.state.loading?"Loading...":"No buses arriving")))):null}},{key:"componentDidUpdate",value:function(e){this.props.stop!==e.stop&&(clearInterval(this.interval),this.setState({data:[]}),this.props.stop&&(this.setState({loading:!0}),this.updatePredictions(),this.interval=setInterval(this.updatePredictions,3e4)))}},{key:"updatePredictions",value:function(){var e=this;fetch("https://nextbus.momentumbus.com/service/publicJSONFeed?command=predictions&a=umd&stopId="+this.props.stop.id).then(function(e){return e.json()}).then(function(e){return(t=e.predictions,t[0]?t:[t]).filter(function(e){return e.direction});var t}).then(function(e){return e.Error?Promise.reject():Promise.resolve(e)}).then(function(e){return e.map(function(e){return{id:e.routeTag,title:/^\d{3} /.test(e.routeTitle)?e.routeTitle.substring(4):e.routeTitle,pred:Z(Z(e.direction).prediction).minutes}})}).then(function(e){return e.sort(function(e,t){return e.id-t.id})}).then(function(t){return e.setState({loading:!1,data:t})}).catch(function(){return e.setState({loading:!1,data:[]})})}}]),t}(i.a.Component),te=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).mapRef=i.a.createRef(),n.state={},n.onStopSelected=n.onStopSelected.bind(Object(m.a)(Object(m.a)(n))),n.onPredictionsCloseClicked=n.onPredictionsCloseClicked.bind(Object(m.a)(Object(m.a)(n))),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(g,{ref:this.mapRef,onStopSelected:this.onStopSelected,selection:this.state.selected}),i.a.createElement(Y,{onStopSelected:this.onStopSelected}),i.a.createElement(ee,{stop:this.state.selected,onCloseClicked:this.onPredictionsCloseClicked}))}},{key:"onStopSelected",value:function(e){this.setState({selected:e}),this.mapRef.current.panTo({lat:e.lat,lng:e.lng})}},{key:"onPredictionsCloseClicked",value:function(){this.setState({selected:null})}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[15,2,1]]]);
//# sourceMappingURL=main.63c6e86f.chunk.js.map